version: "3.8"
services:    
          
    mysql:
        build: ./database/
        volumes:
        - type: volume
          source: lidi-vol
          target: /var/lib/mysql
        restart: always
        networks:
          lidi-net:          
        ports:
          - 3310:3306
    
    lidi-server:
        depends_on:
          - mysql
        build: .
        command: /dist/lidi-server -dsn "web:pass@tcp(localhost:3310)/dictionary"
        ports:
          - target: 8080
            published: 8080
        networks:
          - lidi-net

networks:
    lidi-net:

volumes:
    lidi-vol: